# Лабораторная работа 3
## Создание виртуальной сети машин
Поскольку про доступ в интренет машины Б и машины В ничего не сказано, предположим, что они его не имеют. Тогда неплохим будет решение организовать изолированную сеть виртуальных машин. Для этого при помощи инструментов VirtualBox создаем Host-Only Network - сеть, в которой машины будут взаимодействовать.
![image](https://github.com/user-attachments/assets/aa3104a0-e0a2-4a24-ad26-c5877c52b58a)

## Настройка машины А
Отныне виртуальную машину, на которой были сделаны предыдущие лабораторные работы будем называть машиной А.

Машина А уже имеет доступ к интернету, но для работы с сетью виртуальных машин необходимо добавить второй адаптер к хостовой сети:
![image](https://github.com/user-attachments/assets/c615141e-3463-49e2-a504-145a2ef4da41)

Проверяем подключение к сети Интернет машины А:
![image](https://github.com/user-attachments/assets/379b20ea-c4a4-4ae3-b2b4-791d5c09c2d2)

Доступ имеется.
Теперь узнаем IP-адрес в сети:
```bash
zalof@machine-1:~$ hostname -I
10.0.2.15 192.168.1.1
```
Первый адрес - это адрес из NAT сети с доступом в интернет, второй - адрес в локальной сети.

## Настройка машины Б
Теперь создаем машину Б.
Изначально пытался клонировать уже существующую машину, но это вызвало несколько ошибок с опорными модулями, поэтому решил создать с нуля из того же образа.

Узнаем её адрес: 192.168.1.4
Проверяем подключение:
![image](https://github.com/user-attachments/assets/c2947999-87f7-40b6-bb1a-03fb3c2c4eb1)

## Настройка машины В
Создание и настройка этой машины аналогична процессу создани и настройки машины Б.
Адрес: 192.168.1.6
Подключение тоже есть:
![image](https://github.com/user-attachments/assets/b76097d8-f987-4faa-98b7-75735a943243)

## Запрет доступа из Б в В
Для того, чтобы запретить доступ машины Б к машине В можно использовать инструмент настройки фаервола iptable. 
Введем команду:
```bash
sudo iptables -A OUTPUT -d 192.168.1.6 -j DROP
```
Где `-A` означает добавление нового правила в фаервол;
`OUTPUT` - исходящие пакеты;
`-d` - адрес машины, в которую посылаются пакеты;
`-j` - действие, которое должно быть выполнено при передаче пакета по указанному адресу;
`DROP` - отмена отправки пакета без возвращения ошибки.

Получаем желанный результат:
![image](https://github.com/user-attachments/assets/86ede2fa-71d3-4977-9bc1-96f46fb25ff6)

